<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Tienda</title>
</head>
<body style="background: url(imagenes/registro.png);background-size: cover;">
    <header class="abajo">
        <a href="admin.html" class="logo">TICKETMUNSTER</a>
        <nav>
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="tienda.html">Tienda</a></li>
                <li><a href="vuser.html">Mi perfil</a></li>
                <li><a href="isesion.html">Inicio de sesión</a></li>
                <li><a href="registro.html" class="registro">registrarse</a></li>
            </ul>
        </nav>
    </header>
    <section class="lista">
        
    </section>

    <script>
         async function send(e){
            e.preventDefault();
            var resolt = await fetch("/tienda/explorar");
            var sta = resolt.status;
            var info=[];
            resolt = await resolt.json();
            console.log(resolt);
            switch (sta) {
                case 200:
                for (let i = 0; i < resolt.length; i++) {
                var newdiv = document.createElement("div");
                newdiv.classList.add("event");
                var newh2 = document.createElement("h2");
                newh2.classList.add("even");
                newh2.textContent=resolt[i].event;
                var newp = document.createElement("p");
                newp.classList.add("eved");
                newp.textContent= resolt[i].data;
                var newa = document.createElement("a");
                newa.classList.add("evev");
                newa.addEventListener("click", function () {
                    localStorage.setItem("nom",resolt[i].event);
                    localStorage.setItem("des",resolt[i].data);
                    localStorage.setItem("or",resolt[i].manager);
                    localStorage.setItem("ty",resolt[i].type);
                    localStorage.setItem("pre",resolt[i].precio);
                    window.open("evento.html");
                })
                newa.textContent="Ver mas...";
                newdiv.appendChild(newh2);
                newdiv.appendChild(newp);
                newdiv.appendChild(newa);
                document.querySelector(".lista").appendChild(newdiv);
                }
                    break;
                case 404:
                    alert("Usuario no existe");
                    break;
                case 500:
                    alert("Error en servidor");
                    break;
                case 401:
                    alert("Error dde contraseña");
                    break;
            }
        }
        
        window.onload = (event) => {
            send(event);
        };


        
        
        
    </script>
</body>
</html>