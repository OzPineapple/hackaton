<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Seleccion de boletos</title>
</head>
<body style="background: url(imagenes/registro.png);background-size: cover;">
    <section class="gevento">
        <div class="ev">
            <h2>Seleccionar número de boletos</h2><br><br>
                <form action="" style="border: 2px solid;border-color: red;width: 85%;margin: auto;padding: 20px;" id="form" >
                    <label for="nevent" class="refe">Nombre del evento:</label>
                    <label   id="nevent" class="dato"></label>
                    <br><br>
                    <label for="cost" class="refe">Lugares disponibles:</label>
                    <label   id="levent" class="dato"></label>
                    <br><br>
                    <label for="cost" class="refe">Precio del boleto:</label>
                    <label   id="pevent" class="dato"></label>
                    <br><br>
                    <label for="numbo" class="reg">Numero boletos que desea comprar:</label>
                    <input type="number" name="lug" id="numbo" class="regim"  oninput="calcular(event)">
                    <br><br>
                    <label for="cost" class="refe">Compra total:</label>
                    <label   id="pfinal" class="dato"></label>
                        <br><br>
                    <button class="enviar">Registrar evento</button>
                </form>
        </div>
    </section>
    <script>
        var nom = localStorage.getItem("nom");
        var ludis = localStorage.getItem("ludis");
        var precio = localStorage.getItem("pre");

        var nombre = document.getElementById("nevent");
            var lugares = document.getElementById("levent");
            var precios = document.getElementById("pevent");
            var num = document.getElementById("numbo");
            var fin = document.getElementById("pfinal");
            var enviar = document.querySelector(".enviar");
        var tot =0;
        function cargar() {
            
            nombre.innerText = nom;
            lugares.innerText = ludis;
            precios.innerText = precio;

            
        }

        function calcular(event) {
            event.preventDefault();
            var lugaress = num.value;
            tot = lugaress * precio;
            fin.innerText = tot;
        }

        window.onload=(event)=>{
            cargar();
        }

        enviar.addEventListener("click", async function (e) {
            e.preventDefault();
            var resolt = await fetch("/tienda/evento/buy");
            resolt = await resolt.json();
            


            alert("Compra realizada\n"+
            "Puede visualizar sus boletos en la seccion de `Mi perfil`\n"+
            "Este proceso puede tardar, revise el estado de su compra en la redirección de pagina");

            var url="https://explorer.solana.com/address/";
            window.open("index.html","_self");
        })
        
    </script>
</body>
</html>