<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Registro</title>
</head>
<body>
    
    <section class="Registro">
        <div class="imag"></div>
        <div class="re"><br><br><br>
            <h1 >Registro</h1><br><br><br><br><br><br>
            <br>
            <form action="" style="border: 2px solid;border-color: red;width: 85%;margin: auto;padding: 20px;" id="form" method="post" onsubmit="send(event,this)">
                <label for="nom" class="reg">Nombre:</label>
                <input type="text" name="nom" id="nom" class="regim"><br><br>
                <label for="mail" class="reg">Email:</label>
                <input type="email" name="correo" id="mail" class="regim"><br><br>
                <label for="cos" class="reg">Contraseña:</label>
                <input type="password" name="contra" id="cos" class="regim"><br><br>
                <button class="enviar" type="submit">Iniciar sesión</button>
            </form>
        </div>
    </section>
    
    <script>
        async function send(e,form){
            e.preventDefault();
            var b = new URLSearchParams(new FormData(form));
            console.log(b);
            let resolt = await fetch("/clientes/new",{
                method: 'POST', body: b,
            });
            switch (resolt.status) {
                case 201:
                    alert("Registro exitoso!");
                    window.open("index.html","_self");
                    break;
                case 404:
                    alert("Usuario no existe");
                    break;
                case 500:
                    alert("Error en servidor");
                    break;
                case 401:
                    alert("Error dde contraseña");
                    break;
            }
        }
        var enviar = document.querySelector(".enviar");
        var user = document.querySelector("#nom");
        var pass = document.querySelector("#cos");
        var form = document.getElementById("form");
        const data = new URLSearchParams(new FormData(form));
    </script>
</body>
</html>