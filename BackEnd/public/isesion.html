<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Inicio Usuario</title>
</head>
<body>
    <header class="abajo">
        <a href="admin.html" class="logo">TICKETLAND</a>
        <nav>
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="tienda.html">Tienda</a></li>
                <li><a href="">Tienda de la comunidad</a></li>
                <li><a href="isesion.html">Iniciar sesión</a></li>
                <li><a href="" class="registro">Cerrar sesión</a></li>
            </ul>
        </nav>
    </header>
    <section class="Registro">
        <div class="imag"></div>
        <div class="re"><br><br><br>
            <h1 >Inicio de sesión de Usuario</h1><br><br><br><br><br><br>
            <br>
            <form action="" style="border: 2px solid;border-color: red;width: 85%;margin: auto;padding: 20px;" id="form" method="post" onsubmit="send(event,this)">
                <label for="nom" class="reg">Email:</label>
                <input type="email" name="correo" id="nom" class="regim"><br><br>
                <label for="cos" class="reg">Contraseña:</label>
                <input type="password" name="pass" id="cos" class="regim"><br><br>
                <button class="enviar" type="submit">Iniciar sesión</button>
            </form>
        </div>
    </section>
    
    <script>
        async function send(e,form){
            e.preventDefault();
            let resolt = await fetch("/usuarios/loginu",{
                method: 'POST', body: new URLSearchParams(new FormData(form)),
            });
            switch (resolt.status) {
                case 200:
                    alert("Bienvenido!");
                    window.open("index.html");
                    break;
                case 404:
                    alert("Usuario no existe");
                    break;
                case 500:
                    alert("Error en servidor");
                    break;
                case 401:
                    alert("Error dde contraseña");
                    break;
            }
        }
        var enviar = document.querySelector(".enviar");
        var user = document.querySelector("#nom");
        var pass = document.querySelector("#cos");
        var form = document.getElementById("form");
        const data = new URLSearchParams(new FormData(form));
    </script>
</body>
</html>